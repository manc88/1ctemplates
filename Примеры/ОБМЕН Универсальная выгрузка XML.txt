ќбработка = ќбработки.”ниверсальныйќбменƒаннымиXML.—оздать();

// ѕолучим из макета правила обмена данными
”никальный»дентификатор        = Ќовый ”никальный»дентификатор();
»м€‘айлаѕравилќбмена =  аталог¬ременных‘айлов() + ”никальный»дентификатор + У.xmlФ;	
ћакетѕравилќбмена = —правочники.’ранилищеƒополнительной»нформации.ЌайтиѕоЌаименованию(Уим€макетаФ,»стина);
≈сли Ќ≈ «начение«аполнено(ћакетѕравилќбмена) “огда
возврат;
 онец≈сли;	
ћакетѕравилќбмена = ћакетѕравилќбмена.’ранилище.ѕолучить();	
ћакетѕравилќбмена.«аписать(»м€‘айлаѕравилќбмена);

//1	
   ќбработка.–ежимќбмена=У¬ыгрузкаФ;
   ќбработка.«агружатьƒанные¬–ежимеќбмена=»стина;
   ќбработка.«аписывать–егистрыЌаборами«аписей=»стина;
   ќбработка.«апоминать«агруженныеќбъекты=»стина;
   ќбработка.»спользоватьќтборѕоƒатеƒл€¬сехќбъектов=Ћожь;
   ќбработка.¬ыгружать“олько–азрешенные=»стина;

//2
ќбработка.Ќепосредственное„тение¬»Ѕѕриемнике= »стина;
ќбработка.“ип»нформационнойЅазыƒл€ѕодключени€ = Ћожь;

//3
ќбработка.¬ерси€ѕлатформы»нформационнойЅазыƒл€ѕодключени€ = УV83Ф;
ќбработка.ѕользователь»нформационнойЅазыƒл€ѕодключени€=УФ;
ќбработка.ѕароль»нформационнойЅазыƒл€ѕодключени€=УФ;	
ќбработка.јутентификаци€Windows»нформационнойЅазыƒл€ѕодключени€=Ћожь;
ќбработка.»м€—ервера»нформационнойЅазыƒл€ѕодключени€=Уserver:portФ;
ќбработка.»м€»нформационнойЅазыЌа—ервереƒл€ѕодключени€=УbasenameФ;

//4
ќбработка.“ип”далени€–егистрации»змененийƒл€”зловќбменаѕосле¬ыгрузки=1;

//5
ќбработка.»м€‘айлаѕравилќбмена = »м€‘айлаѕравилќбмена;
ќбработка.«агрузитьѕравилаќбмена();

//6	
ƒл€ каждого стр из ќбработка.“аблицаѕравил¬ыгрузки.—троки ÷икл
стр.¬ключить = 0;
≈сли стр.»м€ = У—правочникиФ “огда
стр.¬ключить = 1;	
 онец≈сли;

ƒл€ каждого стр2 »з стр.—троки ÷икл
стр2.¬ключить = 0;
≈сли стр2.»м€ = УѕользователиФ “огда
—тр2.¬ключить = 1;
—тр2.—сылкаЌа”зелќбмена = ѕланыќбмена.»нтеграци€—1—ƒокументооборотом.ЌайтиѕоЌаименованию(Уим€узлаФ);	
 онец≈сли;	
 онец÷икла;
 онец÷икла;	

ќбработка.¬ыполнить¬ыгрузку();

”далить‘айлы(»м€‘айлаѕравилќбмена); 